<!DOCTYPE html>
<html>
<head>
    <title>Backend Status Check</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .status { padding: 15px; margin: 10px 0; border-radius: 8px; }
        .online { background: #d4edda; color: #155724; }
        .offline { background: #f8d7da; color: #721c24; }
        .testing { background: #fff3cd; color: #856404; }
        h1 { color: #333; }
        code { background: #e9ecef; padding: 2px 6px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>üîç Backend Status Check</h1>
    <div id="status"></div>
    
    <script>
        const BACKEND_URL = 'https://leonardus437.pythonanywhere.com';
        const statusDiv = document.getElementById('status');
        
        async function checkBackend() {
            statusDiv.innerHTML = '<div class="status testing">‚è≥ Checking backend at: <code>' + BACKEND_URL + '</code></div>';
            
            try {
                // Test 1: Direct fetch without CORS mode
                statusDiv.innerHTML += '<div class="status testing">Test 1: Direct connection...</div>';
                const response = await fetch(BACKEND_URL + '/', {
                    method: 'GET',
                    mode: 'no-cors'
                });
                
                statusDiv.innerHTML += '<div class="status online">‚úÖ Backend is reachable (no-cors mode)</div>';
                
                // Test 2: With CORS
                statusDiv.innerHTML += '<div class="status testing">Test 2: CORS connection...</div>';
                const response2 = await fetch(BACKEND_URL + '/', {
                    method: 'GET',
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                if (response2.ok) {
                    const data = await response2.json();
                    statusDiv.innerHTML += '<div class="status online">‚úÖ Backend ONLINE with CORS!<br>Response: ' + JSON.stringify(data) + '</div>';
                    statusDiv.innerHTML += '<div class="status online"><strong>üéâ YOUR SYSTEM IS LIVE!</strong><br>Backend and Frontend are connected properly.</div>';
                } else {
                    statusDiv.innerHTML += '<div class="status offline">‚ùå Backend returned status: ' + response2.status + '</div>';
                }
                
            } catch (error) {
                statusDiv.innerHTML += '<div class="status offline">‚ùå Backend ERROR: ' + error.message + '</div>';
                statusDiv.innerHTML += '<div class="status offline"><strong>‚ö†Ô∏è BACKEND IS DOWN OR NOT CONFIGURED</strong><br><br>Please check:<br>1. Is your PythonAnywhere web app running?<br>2. Did you update main.py with the new CORS code?<br>3. Did you reload the web app?<br><br>Backend URL: <code>' + BACKEND_URL + '</code></div>';
            }
        }
        
        checkBackend();
    </script>
</body>
</html>